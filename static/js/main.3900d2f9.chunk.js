(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{44:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return je}));var a=n(0),r=n(11),c=n.n(r),i=(n(44),n(7)),s=n(8),o=n.n(s),d=n(9),l=n(29),u=n(30),b=n(16),j=n(38),p=n(37),h=n(59),m=(n(46),n(1)),O=[1,2,3,4,5],f=function(e){var t=e.count,n=O.map((function(e){return Object(m.jsx)("span",{className:"fa fa-star ".concat(e<=t&&"checked")},e)}));return Object(m.jsx)("span",{className:"rating",children:n})},v=n(63),x=function(e){var t=new Date(e);return new Intl.DateTimeFormat("ru-RU",{hour:"numeric",minute:"numeric"}).format(t)},y=Object(m.jsx)(v.a,{variant:"primary",onClick:function(){console.log("end sleep")},"data-type":"\u0421\u043e\u043d","data-sub-type":"\u043a\u043e\u043d\u0435\u0446","data-color":"badge-primary",children:"\u041f\u0440\u043e\u0431\u0443\u0436\u0434\u0435\u043d\u0438\u0435"}),g=function(e){var t=e.type,n=e.drugs,a=void 0===n?[]:n,r=e.subType,c=e.description,i=e.time,s=e.color,o=e.quality,d=e.strength,l=e.count,u=e.series,b=a.map((function(e,t){var n=e.title,a=e.dosage;return Object(m.jsxs)("li",{children:[n," - ",a]},t)}));return Object(m.jsx)("div",{className:"vertical-timeline-item vertical-timeline-element",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("span",{className:"vertical-timeline-element-icon bounce-in",children:Object(m.jsx)("i",{className:"badge badge-dot badge-dot-xl ".concat(s),children:" "})}),Object(m.jsxs)("div",{className:"vertical-timeline-element-content bounce-in",children:[Object(m.jsxs)("h4",{className:"timeline-title",children:[t,r&&" - ".concat(r),l&&" - ".concat(l)]}),"\u0441\u043e\u043d"===t.toLowerCase()&&y,c&&Object(m.jsx)("p",{children:c}),o&&Object(m.jsxs)("span",{children:["\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043d\u0430: ",Object(m.jsx)(f,{count:o})]}),u&&Object(m.jsx)("div",{children:Object(m.jsx)("b",{children:"\u0421\u0435\u0440\u0438\u044f"})}),d&&Object(m.jsxs)("span",{children:["\u0421\u0438\u043b\u0430 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u043e\u0432: ",Object(m.jsx)(f,{count:d})]}),a&&b,Object(m.jsx)("span",{className:"vertical-timeline-element-date",children:x(i)})]})]})})},w=function(e){return e.data.map((function(e,t){return Object(m.jsx)("div",{className:"vertical-timeline vertical-timeline--animate vertical-timeline--one-column",children:Object(m.jsx)(g,Object(i.a)({},e))},t)}))},k=(n(48),n(49),function(e){var t=e.buttons.map((function(e,t){var n=e.disabled,a=e.variant,r=e.onClick,c=e.icon,i=e.type,s=e.subType;return Object(m.jsx)(v.a,{variant:a,disabled:n,onClick:r,"data-type":i,"data-sub-type":s,"data-color":a,children:Object(m.jsx)("i",{className:"fa ".concat(c),"aria-hidden":"true"})},t)}));return Object(m.jsx)("div",{className:"buttons-panel",children:t})}),C=n(12),T="DISABLE_BUTTON",S="ENABLE_BUTTON",D="SHOW_MODAL",I="HIDE_MODAL",M=function(e){return{type:T,payload:{type:e}}},N=function(e){return{type:S,payload:{type:e}}},_=function(e){return{type:D,payload:{modalType:e}}},B=function(){return{type:I}},F=n(20),L="SET_ITEM",E="SET_ITEMS",A=function(e){return{type:E,payload:{items:e}}},G=function(e){return{type:L,payload:{item:e}}},H=n(13),R=n(60),U=n(62),P=function(e){var t=e.handleClose,n=e.handleSubmit,r=Object(a.useState)(""),c=Object(H.a)(r,2),i=c[0],s=c[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R.a.Body,{children:Object(m.jsx)(U.a,{children:Object(m.jsxs)(U.a.Group,{controlId:"formDescription",children:[Object(m.jsx)(U.a.Label,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(m.jsx)(U.a.Control,{as:"textarea",rows:3,value:i,onChange:function(e){s(e.currentTarget.value)}}),Object(m.jsx)(U.a.Text,{className:"text-muted",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})})}),Object(m.jsxs)(R.a.Footer,{children:[Object(m.jsx)(v.a,{variant:"secondary",onClick:t,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(m.jsx)(v.a,{variant:"primary",onClick:function(){n({description:i,type:"\u0415\u0434\u0430",color:"badge-success"})},disabled:!i,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},J=function(e){var t=e.handleClose,n=e.handleSubmit,r=Object(a.useState)(1),c=Object(H.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(!1),d=Object(H.a)(o,2),l=d[0],u=d[1],b=Object(a.useState)(1),j=Object(H.a)(b,2),p=j[0],h=j[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R.a.Body,{children:Object(m.jsxs)(U.a,{children:[Object(m.jsx)(U.a.Group,{controlId:"formAttackSeries",children:Object(m.jsx)(U.a.Check,{type:"checkbox",id:"checkbox-series",label:"\u0421\u0435\u0440\u0438\u0439\u043d\u044b\u0435 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u044b?",checked:l,onChange:function(){u(!l)}})}),l&&Object(m.jsxs)(U.a.Group,{controlId:"formAttackCount",children:[Object(m.jsx)(U.a.Label,{children:"\u041a\u043e\u043b-\u0432\u043e \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u043e\u0432"}),Object(m.jsx)(U.a.Control,{type:"number",placeholder:"\u041a\u043e\u043b-\u0432\u043e \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u043e\u0432",value:i,onChange:function(e){s(e.currentTarget.value)}})]}),Object(m.jsxs)(U.a.Group,{controlId:"formAttackStrength",children:[Object(m.jsx)(U.a.Label,{children:"Range"}),Object(m.jsx)(U.a.Control,{type:"range",min:1,max:3,value:p,step:1,onChange:function(e){return h(e.currentTarget.value)}})]})]})}),Object(m.jsxs)(R.a.Footer,{children:[Object(m.jsx)(v.a,{variant:"secondary",onClick:t,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(m.jsx)(v.a,{variant:"primary",onClick:function(){n({type:"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u044b",count:i,series:l,strength:p,color:"badge-danger"})},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},W=n(14),q=[{_id:1,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 1",dosage:"\u0434\u043e\u0437\u0438\u0440\u043e\u0432\u043a\u0430 1"},{_id:2,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 2",dosage:"\u0434\u043e\u0437\u0438\u0440\u043e\u0432\u043a\u0430 2"},{_id:3,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 3",dosage:"\u0434\u043e\u0437\u0438\u0440\u043e\u0432\u043a\u0430 3"},{_id:4,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 4",dosage:"\u0434\u043e\u0437\u0438\u0440\u043e\u0432\u043a\u0430 4"},{_id:5,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 5",dosage:"\u0434\u043e\u0437\u0438\u0440\u043e\u0432\u043a\u0430 5"}],z=function(e){var t=e.drugsList,n=void 0===t?q:t,r=e.handleClose,c=e.handleSubmit,i=Object(a.useState)((function(){return n.map((function(e){return e.checked=!1,e}))})),s=Object(H.a)(i,2),o=s[0],d=s[1],l=function(e){var t=e.currentTarget.dataset.id,n=Object(W.a)(o),a=n.findIndex((function(e){return e._id.toString()===t.toString()}));return-1!==a&&(n[a].checked=!n[a].checked,d(n),!0)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R.a.Body,{children:Object(m.jsx)(U.a,{children:o.map((function(e){return Object(m.jsx)(U.a.Group,{controlId:"formDrug-".concat(e._id),children:Object(m.jsx)(U.a.Check,{type:"checkbox","data-id":null===e||void 0===e?void 0:e._id,onChange:l,value:e.checked,label:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.dosage,")"),title:"".concat(null===e||void 0===e?void 0:e.title," (").concat(null===e||void 0===e?void 0:e.dosage,")")})},null===e||void 0===e?void 0:e._id)}))})}),Object(m.jsxs)(R.a.Footer,{children:[Object(m.jsx)(v.a,{variant:"secondary",onClick:r,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(m.jsx)(v.a,{variant:"primary",onClick:function(){var e={type:"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430",drugs:o.filter((function(e){return e.checked})),color:"badge-warning"};c(e)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},K=n(33),Q=n(36);function V(){return X.apply(this,arguments)}function X(){return(X=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)("items",1,{upgrade:function(e){e.createObjectStore("items",{keyPath:"_id",autoIncrement:!0}).createIndex("date","date")}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,n,a){return Z.apply(this,arguments)}function Z(){return(Z=Object(d.a)(o.a.mark((function e(t,n,a,r){var c,i,s,d,l,u,b,j,p,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.transaction(n),i=[],s=c.store.index(a),d=!0,l=!1,e.prev=5,b=Object(K.a)(s.iterate(r));case 7:return e.next=9,b.next();case 9:return j=e.sent,d=j.done,e.next=13,j.value;case 13:if(p=e.sent,d){e.next=20;break}h=p,i.push(h.value);case 17:d=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),l=!0,u=e.t0;case 26:if(e.prev=26,e.prev=27,d||null==b.return){e.next=31;break}return e.next=31,b.return();case 31:if(e.prev=31,!l){e.next=34;break}throw u;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.abrupt("return",i);case 37:case"end":return e.stop()}}),e,null,[[5,22,26,36],[27,,31,35]])})))).apply(this,arguments)}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(d.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.transaction("items","readwrite"),r=a.objectStore("items"),e.prev=2,e.next=5,r.add(n);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),e.t0;case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}var te=n(61),ne=function(e){var t=e.db,n=e.handleClose,r=e.showModal,c=e.modal,i=void 0===c?{}:c,s=i.type,l=i.description,u=i.drugs,b=i.count,j=i.series,p=i.strength,h=Object(a.useState)(!1),O=Object(H.a)(h,2),f=O[0],v=O[1],x=function(){var e=Object(d.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.time=(new Date).getTime(),n.date=Object(te.a)(new Date,"yyyy-MM-dd"),e.next=4,$(t,n);case 4:je.dispatch(G(n)),je.dispatch(B());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){f!==r&&v(r)}),[r,f]),Object(m.jsxs)(R.a,{show:f,onHide:n,children:[Object(m.jsx)(R.a.Header,{closeButton:!0,children:Object(m.jsx)(R.a.Title,{children:s})}),l&&Object(m.jsx)(P,{handleClose:n,handleSubmit:x}),b&&j&&p&&Object(m.jsx)(J,{handleClose:n,handleSubmit:x}),u&&Object(m.jsx)(z,{handleClose:n,handleSubmit:x})]})},ae="items",re=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).initDB=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return t=e.sent,a.setState({db:t}),e.next=6,a.getItems();case 6:case"end":return e.stop()}}),e)}))),a.getItems=Object(d.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.db,n=Object(te.a)(new Date(a.props.currentDate),"yyyy-MM-dd"),e.next=4,Y(t,ae,"date",n);case 4:(r=e.sent).length&&a.props.setItems(r);case 6:case"end":return e.stop()}}),e)}))),a.addItem=function(){var e=Object(d.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.db,r=n.transaction(ae,"readwrite"),c=r.objectStore(ae),e.prev=3,e.next=6,c.add(t);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),e.t0;case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.handlerShowModal=function(){a.props.showModal()},a.handleModalFilter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.findIndex((function(t){var n=t.type;return e.toLowerCase()===n.toLowerCase()}));return t[n]},a.state={db:null,_currentDate:new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(new Date(a.props.currentDate))},a.handlerShowModal=a.handlerShowModal.bind(Object(b.a)(a)),a.handleModalFilter=a.handleModalFilter.bind(Object(b.a)(a)),a.initDB=a.initDB.bind(Object(b.a)(a)),a.getItems=a.getItems.bind(Object(b.a)(a)),a.addItem=a.addItem.bind(Object(b.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.initDB()}},{key:"render",value:function(){var e=this.props,t=e.modalType,n=e.modals,a=e.buttons,r=e.modalShow,c=e.hideModal,i=e.items;return Object(m.jsx)(h.a,{children:Object(m.jsx)("div",{className:"row d-flex justify-content-center mt-3 mb-auto",children:Object(m.jsx)("div",{className:"col-md-6",children:Object(m.jsx)("div",{className:"main-card mb-3 card",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title",children:this.state._currentDate}),Object(m.jsx)(k,{buttons:a}),Object(m.jsx)(w,{data:i}),Object(m.jsx)(ne,{db:this.state.db,showModal:r,handleClose:c,modal:this.handleModalFilter(t,n)})]})})})})})}}]),n}(a.Component);var ce=Object(F.b)((function(e){return{buttons:e.buttons.buttons,modalShow:e.buttons.modalShow,modalType:e.buttons.modalType,modals:e.buttons.modals,items:e.data.items,currentDate:e.data.currentDate}}),(function(e){return Object(i.a)({dispatch:e},Object(C.bindActionCreators)({disableButton:M,enableButton:N,setItem:G,hideModal:B,showModal:_,setItems:A},e))}))(re),ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(56);function se(e){return je.dispatch(_(e.currentTarget.dataset.type))}var oe={buttons:[{type:"\u0421\u043e\u043d",subType:"\u043d\u0430\u0447\u0430\u043b\u043e",icon:"fa-bed",disabled:!1,variant:"primary",onClick:function(e){var t=e.currentTarget.dataset,n=t.type,a=t.subType,r=t.color,c=e.currentTarget.disabled.disabled,i={type:n,subType:a,time:(new Date).getTime(),color:"badge-".concat(r)};"\u0441\u043e\u043d"===n.toLowerCase()&&"\u043d\u0430\u0447\u0430\u043b\u043e"===a.toLowerCase()&&(c?"\u0441\u043e\u043d"===n.toLowerCase()&&je.dispatch(N(n)):(je.dispatch(M(n)),je.dispatch(G(i))))}},{type:"\u0415\u0434\u0430",icon:"fa-cutlery",disabled:!1,variant:"success",onClick:se},{type:"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430",icon:"fa-medkit",disabled:!1,variant:"warning",onClick:se},{type:"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u044b",icon:"fa-heartbeat",disabled:!1,variant:"danger",onClick:se}],modalShow:!1,modalType:"",modals:[{type:"\u0435\u0434\u0430",description:!0,drugs:!1,count:!1,series:!1,strength:!1},{type:"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430",drugs:!0,description:!1,count:!1,series:!1,strength:!1},{type:"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u044b",count:!0,series:!0,strength:!0,description:!1,drugs:!1}]},de={currentDate:(new Date).getTime(),items:[]},le=Object(C.combineReducers)({buttons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:var n=Object(W.a)(e.buttons),a=n.findIndex((function(e){return e.type===t.payload.type}));return n[a].disabled=!0,Object(i.a)(Object(i.a)({},e),{},{buttons:Object(W.a)(n)});case S:var r=Object(W.a)(e.buttons),c=r.findIndex((function(e){return e.type===t.payload.type}));return r[c].disabled=!1,Object(i.a)(Object(i.a)({},e),{},{buttons:Object(W.a)(r)});case D:return Object(i.a)(Object(i.a)({},e),{},{modalShow:!0,modalType:t.payload.modalType});case I:return Object(i.a)(Object(i.a)({},e),{},{modalShow:!1,modalType:""});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(i.a)(Object(i.a)({},e),{},{items:[].concat(Object(W.a)(e.items),[t.payload.item])});case E:return Object(i.a)(Object(i.a)({},e),{},{items:t.payload.items});default:return e}}}),ue=n(34),be=n(35),je=Object(C.createStore)(le,Object(be.composeWithDevTools)(Object(C.applyMiddleware)(ue.a)));c.a.render(Object(m.jsx)(F.a,{store:je,children:Object(m.jsx)(ce,{})}),document.getElementById("root")),ie()}},[[57,1,2]]]);
//# sourceMappingURL=main.3900d2f9.chunk.js.map