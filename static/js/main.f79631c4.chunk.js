(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{84:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return bt}));var a=n(0),r=n(28),c=n.n(r),s=(n(84),n(38)),i=n(14),o=n(109),u=n(110),d=n(1);function l(){return Object(d.jsxs)(o.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(d.jsx)(s.b,{className:"navbar-brand",to:"/",children:"\u0414\u043d\u0435\u0432\u043d\u0438\u043a"}),Object(d.jsx)(o.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(d.jsx)(o.a.Collapse,{id:"responsive-navbar-nav",children:Object(d.jsxs)(u.a,{children:[Object(d.jsx)(s.b,{className:"nav-link",to:"/settings",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(d.jsx)(s.b,{className:"nav-link",to:"/stats",disabled:!0,children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"})]})})]})}var h=n(7),p=n(6),b=n.n(p),j=n(11),f=n(33),O=n(34),m=n(12),v=n(37),y=n(36),x=n(104),g=n(101),w=(n(92),[1,2,3]),k=function(e){var t=e.count,n=w.map((function(e){return Object(d.jsx)("span",{className:"fa fa-star ".concat(e<=t&&"checked")},e)}));return Object(d.jsx)("span",{className:"rating",children:n})},D=n(100),T=n(71),S=n(79);function C(){return I.apply(this,arguments)}function I(){return(I=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.db){e.next=6;break}return e.next=3,M();case 3:return t=e.sent,this.props.setDB(t),e.abrupt("return",t);case 6:return e.abrupt("return",this.props.db);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function M(){return L.apply(this,arguments)}function L(){return(L=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)("epileptic_diary",1,{upgrade:function(e){e.createObjectStore("items",{keyPath:"_id",autoIncrement:!0}).createIndex("date","date"),e.createObjectStore("settings",{keyPath:"_id",autoIncrement:!0}).createIndex("type","type")}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n,a){return B.apply(this,arguments)}function B(){return(B=Object(j.a)(b.a.mark((function e(t,n,a,r){var c,s,i,o,u,d,l,h,p,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.transaction(n),s=[],i=c.store.index(a),o=!0,u=!1,e.prev=5,l=Object(T.a)(i.iterate(r));case 7:return e.next=9,l.next();case 9:return h=e.sent,o=h.done,e.next=13,h.value;case 13:if(p=e.sent,o){e.next=20;break}j=p,s.push(j.value);case 17:o=!0,e.next=7;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(5),u=!0,d=e.t0;case 26:if(e.prev=26,e.prev=27,o||null==l.return){e.next=31;break}return e.next=31,l.return();case 31:if(e.prev=31,!u){e.next=34;break}throw d;case 34:return e.finish(31);case 35:return e.finish(26);case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}}),e,null,[[5,22,26,36],[27,,31,35]])})))).apply(this,arguments)}function E(e,t,n){return F.apply(this,arguments)}function F(){return(F=Object(j.a)(b.a.mark((function e(t,n,a){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction("items"),c=r.objectStore(n),e.abrupt("return",c.get(a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,n){return H.apply(this,arguments)}function H(){return(H=Object(j.a)(b.a.mark((function e(t,n,a){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction(a,"readwrite"),c=r.objectStore(a),e.prev=2,e.next=5,c.add(n);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function R(e,t,n){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(b.a.mark((function e(t,n,a){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction(a,"readwrite"),c=r.objectStore(a),e.prev=2,e.next=5,c.put(n);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),e.t0;case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function P(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(j.a)(b.a.mark((function e(t,n,a){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transaction(n,"readwrite"),c=r.objectStore(n),e.prev=2,e.next=5,c.delete(a);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),e.t0;case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}var U="SET_ITEM",G="SET_ITEMS",X="RESET_ITEM",K="SET_DATE",J="SET_DB",Y=function(e){return{type:G,payload:{items:e}}},q=function(e){return{type:U,payload:{item:e}}},z=function(e){return{type:X,payload:{item:e}}},Q=function(e){return{type:K,payload:{date:e}}},V=function(e){return{type:J,payload:{db:e}}},Z=function(e){var t=new Date(e);return new Intl.DateTimeFormat("ru-RU",{hour:"numeric",minute:"numeric"}).format(t)},$=function(e,t){var n=36e5,a=t-e,r="",c=Math.trunc(a/n),s=Math.trunc((a-c*n)/6e4);return c>0&&(r+="".concat(c," \u0447\u0430\u0441\u043e\u0432 \u0438 ")),r+="".concat(s," \u043c\u0438\u043d\u0443\u0442")},ee=function(e){var t=e.db,n=e.type,a=e.drugs,r=void 0===a?[]:a,c=e.subType,s=e.description,i=e.time,o=e.color,u=e.quality,l=e.strength,h=e.count,p=e.series,f=e.timeEnd,O=e.sleepId,m=e.setSleepId,v=e.index,y=e._id,x=e.deleteItem,g=i+18e5>(new Date).getTime(),w=Object(d.jsxs)(D.a,{variant:"link",size:"sm","data-id":y,onClick:function(e){x(e.currentTarget.dataset.id)},children:[Object(d.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})," \u0423\u0434\u0430\u043b\u0438\u0442\u044c"]}),T=r.map((function(e,t){var n=e.title,a=e.dosage;return Object(d.jsxs)("li",{children:[n," - ",a]},t)})),S=Object(d.jsx)(D.a,{variant:"primary",onClick:Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,"items",O);case 2:return(n=e.sent).subType="\u043a\u043e\u043d\u0435\u0446",n.timeEnd=(new Date).getTime(),e.next=7,R(t,n,"items");case 7:m(-1),bt.dispatch(z(n));case 9:case"end":return e.stop()}}),e)}))),"data-type":"\u0421\u043e\u043d","data-sub-type":"\u043a\u043e\u043d\u0435\u0446","data-color":"badge-primary",children:"\u041f\u0440\u043e\u0431\u0443\u0436\u0434\u0435\u043d\u0438\u0435"});return Object(d.jsx)("div",{className:"vertical-timeline-item vertical-timeline-element",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:"vertical-timeline-element-icon bounce-in",children:Object(d.jsx)("i",{className:"badge badge-dot badge-dot-xl ".concat(o),children:" "})}),Object(d.jsxs)("div",{className:"vertical-timeline-element-content bounce-in",children:[Object(d.jsx)("div",{children:Object(d.jsxs)("h4",{className:"timeline-title",children:[n,h&&" - ".concat(h)]})}),"\u0441\u043e\u043d"===n.toLowerCase()&&"\u043a\u043e\u043d\u0435\u0446"!==c.toLowerCase()&&S,"\u0441\u043e\u043d"===n.toLowerCase()&&"\u043a\u043e\u043d\u0435\u0446"===c.toLowerCase()&&f&&Object(d.jsxs)("div",{children:[Object(d.jsx)("b",{children:"\u041f\u0440\u043e\u0431\u0443\u0436\u0434\u0435\u043d\u0438\u0435:"})," ",Z(f)]}),"\u0441\u043e\u043d"===n.toLowerCase()&&"\u043a\u043e\u043d\u0435\u0446"===c.toLowerCase()&&f&&Object(d.jsxs)("div",{children:[Object(d.jsx)("b",{children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c:"})," ",$(i,f)]}),s&&Object(d.jsx)("p",{children:s}),u&&Object(d.jsxs)("span",{children:["\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043d\u0430: ",Object(d.jsx)(k,{count:u})]}),p&&Object(d.jsx)("div",{children:Object(d.jsx)("b",{children:"\u0421\u0435\u0440\u0438\u044f"})}),l&&Object(d.jsxs)("span",{children:["\u0421\u0438\u043b\u0430 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u043e\u0432: ",Object(d.jsx)(k,{count:l})]}),r&&T,Object(d.jsx)("span",{className:"vertical-timeline-element-date",children:Z(i)}),0===v&&g&&w]})]})})},te=function(e){var t=e.db,n=e.data,a=e.sleepId,r=e.setSleepId,c=e.deleteItem;return n.map((function(e,n){return Object(d.jsx)("div",{className:"vertical-timeline vertical-timeline--animate vertical-timeline--one-column",children:Object(d.jsx)(ee,Object(h.a)(Object(h.a)({db:t},e),{},{sleepId:a,setSleepId:r,index:n,deleteItem:c}))},n)}))},ne=(n(93),"DISABLE_BUTTON"),ae="ENABLE_BUTTON",re="SHOW_MODAL",ce="HIDE_MODAL",se=function(e){return{type:ne,payload:{type:e}}},ie=function(e){return{type:ae,payload:{type:e}}},oe=function(e){return{type:re,payload:{modalType:e}}},ue=function(){return{type:ce}},de=n(106),le=(n(94),function(e){var t=e.sleepId,n=e.db,a=e.buttons,r=e.setSleepId,c=e.notToday,s=a.map((function(e,a){var c=e.variant,s=e.onClick,i=e.icon,o=e.type,u=e.subType;return Object(d.jsx)(D.a,{variant:c,className:"button-".concat(c),disabled:-1!==t&&"\u0441\u043e\u043d"===o.toLowerCase(),onClick:s||function(){var e=Object(j.a)(b.a.mark((function e(t){var a,c,s,i,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentTarget.dataset,c=a.type,s=a.subType,i=a.color,o=t.currentTarget.disabled.disabled,u={type:c,subType:s,time:(new Date).getTime(),color:"badge-".concat(i),date:Object(de.a)(new Date,"yyyy-MM-dd")},e.t0=r,e.next=6,_(n,u,"items");case 6:e.t1=e.sent,(0,e.t0)(e.t1),o?bt.dispatch(ie(c)):(bt.dispatch(se(c)),bt.dispatch(q(u)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"data-type":o,"data-sub-type":u,"data-color":c,children:Object(d.jsx)("i",{className:"fa ".concat(i),"aria-hidden":"true"})},a)}));return Object(d.jsx)("div",{className:"buttons-panel",style:{display:c&&"none"},children:s})}),he=n(21),pe=n(35),be=n(15),je=n(107),fe=n(108),Oe=function(e){var t=e.handleClose,n=e.handleSubmit,r=e.type,c=e.variant,s=Object(a.useState)(""),i=Object(be.a)(s,2),o=i[0],u=i[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(je.a.Body,{children:Object(d.jsx)(fe.a,{children:Object(d.jsxs)(fe.a.Group,{controlId:"formDescription",children:[Object(d.jsx)(fe.a.Label,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(d.jsx)(fe.a.Control,{as:"textarea",rows:3,value:o,onChange:function(e){u(e.currentTarget.value)}}),Object(d.jsx)(fe.a.Text,{className:"text-muted",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})})}),Object(d.jsxs)(je.a.Footer,{children:[Object(d.jsx)(D.a,{variant:"secondary",onClick:t,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(d.jsx)(D.a,{variant:"primary",onClick:function(){var e={description:o,type:r,color:"badge-".concat(c)};n(e)},disabled:!o,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},me=function(e){var t=e.handleClose,n=e.handleSubmit,r=e.type,c=e.variant,s=Object(a.useState)(1),i=Object(be.a)(s,2),o=i[0],u=i[1],l=Object(a.useState)(!1),h=Object(be.a)(l,2),p=h[0],b=h[1],j=Object(a.useState)(1),f=Object(be.a)(j,2),O=f[0],m=f[1],v=Object(a.useState)("\u0421\u043b\u0430\u0431\u044b\u0439 \u043f\u0440\u0438\u0441\u0442\u0443\u043f"),y=Object(be.a)(v,2),x=y[0],g=y[1],w=Object(a.useState)("secondary"),k=Object(be.a)(w,2),T=k[0],S=k[1];return Object(a.useEffect)((function(){switch(O){case"1":return S("secondary"),void g("\u0421\u043b\u0430\u0431\u044b\u0439 \u043f\u0440\u0438\u0441\u0442\u0443\u043f");case"2":return S("warning"),void g("\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u043f\u0440\u0438\u0441\u0442\u0443\u043f");case"3":return S("danger"),void g("\u0421\u0438\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u0441\u0442\u0443\u043f");default:return S("secondary"),void g("\u0421\u043b\u0430\u0431\u044b\u0439 \u043f\u0440\u0438\u0441\u0442\u0443\u043f")}}),[O]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(je.a.Body,{children:Object(d.jsxs)(fe.a,{inline:!0,style:{justifyContent:"space-between"},children:[Object(d.jsx)(fe.a.Group,{controlId:"formAttackSeries",className:"mb-2 mr-sm-2",children:Object(d.jsx)(fe.a.Check,{type:"checkbox",id:"checkbox-series",label:"\u0421\u0435\u0440\u0438\u0439\u043d\u044b\u0435 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u044b?",checked:p,onChange:function(){b(!p)}})}),Object(d.jsx)(fe.a.Group,{controlId:"formAttackCount",className:"mb-2 mr-sm-2",children:Object(d.jsx)(fe.a.Control,{type:"number",placeholder:"\u041a\u043e\u043b-\u0432\u043e \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u043e\u0432",value:o,disabled:!p,onChange:function(e){u(e.currentTarget.value)}})}),Object(d.jsxs)(fe.a.Group,{controlId:"formAttackStrength",className:"mb-2",style:{width:"100%"},children:[Object(d.jsx)(fe.a.Label,{children:"\u0421\u0438\u043b\u0430 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0430:"}),Object(d.jsx)(fe.a.Control,{type:"range",min:1,max:3,value:O,step:1,onChange:function(e){return m(e.currentTarget.value)}}),Object(d.jsx)(fe.a.Text,{className:"text-".concat(T),children:x})]})]})}),Object(d.jsxs)(je.a.Footer,{children:[Object(d.jsx)(D.a,{variant:"secondary",onClick:t,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(d.jsx)(D.a,{variant:"primary",onClick:function(){var e={type:r,count:o,series:p,strength:O,color:"badge-".concat(c)};n(e)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})},ve=n(19),ye=function(e){var t=e.drugsList,n=void 0===t?[]:t,r=e.handleClose,c=e.handleSubmit,s=e.type,i=e.variant,o=Object(a.useState)((function(){return n.map((function(e){return e.checked=!1,e}))})),u=Object(be.a)(o,2),l=u[0],h=u[1],p=function(e){var t=e.currentTarget.dataset.id,n=Object(ve.a)(l),a=n.findIndex((function(e){return e._id.toString()===t.toString()}));return-1!==a&&(n[a].checked=!n[a].checked,h(n),!0)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(je.a.Body,{children:[0===l.length&&Object(d.jsxs)("h3",{children:["\u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430, \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 ",Object(d.jsx)(xe,{to:"/settings",label:"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]}),Object(d.jsx)(fe.a,{children:l.map((function(e){var t=Object(d.jsxs)("span",{children:[e.title," ",Object(d.jsx)(g.a,{variant:"info",children:e.dosage})]});return Object(d.jsx)(fe.a.Group,{controlId:"formDrug-".concat(e.title,"-").concat(e.dosage),children:Object(d.jsx)(fe.a.Check,{type:"checkbox","data-id":null===e||void 0===e?void 0:e._id,onChange:p,value:e.checked,label:t})},"".concat(e.title,"-").concat(e.dosage))}))})]}),Object(d.jsxs)(je.a.Footer,{children:[Object(d.jsx)(D.a,{variant:"secondary",onClick:r,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(d.jsx)(D.a,{variant:"primary",onClick:function(){var e={type:s,drugs:l.filter((function(e){return e.checked})),color:"badge-".concat(i)};c(e)},disabled:0===l.length||0===l.filter((function(e){return e.checked})).length,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})};function xe(e){var t=e.label,n=e.to,a=e.activeOnlyWhenExact,r=Object(i.g)({path:n,exact:a});return Object(d.jsxs)("span",{className:r?"active":"",children:[r&&"> ",Object(d.jsx)(s.b,{to:n,children:t})]})}var ge=function(e){var t=e.db,n=e.handleClose,r=e.showModal,c=e.modal,s=void 0===c?{}:c,i=e.drugsList,o=s.type,u=s.description,l=s.drugs,h=s.count,p=s.series,f=s.strength,O=s.variant,m=Object(a.useState)(!1),v=Object(be.a)(m,2),y=v[0],x=v[1],g=function(){var e=Object(j.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.time=(new Date).getTime(),n.date=Object(de.a)(new Date,"yyyy-MM-dd"),e.next=4,_(t,n,"items");case 4:n._id=e.sent,bt.dispatch(q(n)),bt.dispatch(ue());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){y!==r&&x(r)}),[r,y]),Object(d.jsxs)(je.a,{show:y,onHide:n,children:[Object(d.jsx)(je.a.Header,{closeButton:!0,children:Object(d.jsx)(je.a.Title,{children:o})}),u&&Object(d.jsx)(Oe,{handleClose:n,handleSubmit:g,type:o,variant:O}),h&&p&&f&&Object(d.jsx)(me,{handleClose:n,handleSubmit:g,type:o,variant:O}),l&&Object(d.jsx)(ye,{drugsList:i,handleClose:n,handleSubmit:g,type:o,variant:O})]})},we=n(103),ke=function(e){return e.sort((function(e,t){return e.time>t.time?-1:1}))},De="SET_DRUG",Te="SET_DRUGS",Se=function(e){return{type:De,payload:{drug:e}}},Ce=function(e){return{type:Te,payload:{drugs:e}}},Ie=n(74),Me=function(e){return Object(de.a)(new Date(e),"yyyy-MM-dd")},Le=function(e){var t=e.setDate,n=e.currentDate,r=Object(a.useState)((function(){return Me(n)})),c=Object(be.a)(r,2),s=c[0],i=c[1];return Object(d.jsx)(Ie.a,{className:"date-picker",children:Object(d.jsx)(fe.a,{children:Object(d.jsx)(fe.a.Control,{type:"date",className:"date-picker-input",value:s,onKeyDown:function(e){return e.preventDefault()},onChange:function(e){var n=e.currentTarget.value;n&&(i(Me(n)),t(n))}})})})},Ne=n(60),Be=n(111),Ee=n(102),Fe=n(76);function _e(e,t){return e.filter((function(e){return e.type.toLowerCase()===t.toLowerCase()}))}function He(e){return e.reduce((function(e,t){var n=e.findIndex((function(e){return e.date===t.date}));if(-1===n)return[].concat(Object(ve.a)(e),[{date:t.date,count:+t.count,strength:+t.strength,n:1}]);var a=e[n],r=a.count,c=a.strength,s=a.n,i=r+ +t.count,o=c+ +t.strength,u=s+1;return e[n]=Object(h.a)(Object(h.a)({},e[n]),{},{count:i,strength:o,n:u}),e}),[])}function Re(e){var t=[["x"],["y0"],["y1"]];if(0!==e.length){for(var n=Object(Be.a)(new Date(e[0].date),Object(Ee.a)(new Date(e[0].date))),a=0;a<n;a++)t[0].push(Object(de.a)(Object(Fe.a)(Object(Ee.a)(new Date(e[0].date)),a),"yyyy-MM-dd")),t[1].push(0),t[2].push(0);e.forEach((function(e,n,a){for(var r=e.date,c=e.count,s=e.strength,i=e.n,o=0!==n?Object(Be.a)(new Date(r),new Date(a[n-1].date)):0,u=1;u<o;u++)t[0].push(Object(de.a)(Object(Fe.a)(new Date(a[n-1].date),u),"yyyy-MM-dd")),t[1].push(0),t[2].push(0);t[0].push(r),t[1].push(+c),t[2].push(+(s/i).toFixed(2))}))}return t}function We(e){var t=e.colors,n=e.columns,a=e.names,r=e.types;return{colors:Pe(t,{}),columns:n,names:Pe(a,{}),types:Pe(r,{x:"x"})}}function Pe(e,t){return e.reduce((function(e,t,n){return Object(h.a)(Object(h.a)({},e),{},Object(Ne.a)({},"y".concat(n),t))}),t)}var Ae="items",Ue=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).initDB=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.call(Object(m.a)(a));case 2:if(!a.props.db){e.next=7;break}return e.next=5,a.getItems();case 5:e.next=8;break;case 7:a.props.setItems([]);case 8:case"end":return e.stop()}}),e)}))),a.getItems=Object(j.a)(b.a.mark((function e(){var t,n,r,c,s,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.db,r=Object(de.a)(new Date(a.props.currentDate),"yyyy-MM-dd"),e.next=4,N(n,Ae,"date",r);case 4:return c=e.sent,e.t0=ke,e.next=8,N(n,Ae,"date",Object(de.a)(Object(we.a)(new Date(a.props.currentDate),1),"yyyy-MM-dd"));case 8:return e.t1=e.sent,s=(0,e.t0)(e.t1),"\u0441\u043e\u043d"===(null===(t=s[0])||void 0===t?void 0:t.type.toLowerCase())&&c.push(s[0]),-1!==(i=c.findIndex((function(e){return!!e.subType&&"\u043d\u0430\u0447\u0430\u043b\u043e"===(null===e||void 0===e?void 0:e.subType.toLowerCase())})))&&a.setSleepId(c[i]._id),c.length?a.props.setItems(c):a.props.setItems([]),e.next=16,N(n,"settings","type","drug");case 16:(o=e.sent).length&&a.props.setDrugs(o);case 18:case"end":return e.stop()}}),e)}))),a.addItem=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.db,r=n.transaction(Ae,"readwrite"),c=r.objectStore(Ae),e.prev=3,e.next=6,c.add(t);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),e.t0;case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.deleteItem=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(a.props.db,Ae,+t);case 2:return e.next=4,a.getItems();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setDateFromDatepicker=function(e){a.props.setDate(e)},a.handlerShowModal=function(){a.props.showModal()},a.setSleepId=function(e){a.setState({sleepId:e})},a.handleModalFilter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.findIndex((function(t){var n=t.type;return e.toLowerCase()===n.toLowerCase()}));return t[n]},a.state={_currentDate:new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(new Date(a.props.currentDate)),today:Object(de.a)(new Date,"yyyy-MM-dd"),sleepId:-1},a.handlerShowModal=a.handlerShowModal.bind(Object(m.a)(a)),a.handleModalFilter=a.handleModalFilter.bind(Object(m.a)(a)),a.initDB=a.initDB.bind(Object(m.a)(a)),a.getItems=a.getItems.bind(Object(m.a)(a)),a.addItem=a.addItem.bind(Object(m.a)(a)),a.setSleepId=a.setSleepId.bind(Object(m.a)(a)),a.setDateFromDatepicker=a.setDateFromDatepicker.bind(Object(m.a)(a)),a.deleteItem=a.deleteItem.bind(Object(m.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.initDB()}},{key:"componentDidUpdate",value:function(e,t,n){e.currentDate!==this.props.currentDate&&(this.setState({_currentDate:new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"long",year:"numeric"}).format(new Date(this.props.currentDate))}),this.getItems())}},{key:"render",value:function(){var e=this.props,t=e.modalType,n=e.modals,a=e.buttons,r=e.modalShow,c=e.hideModal,s=e.items,i=e.drugs,o=_e(s,"\u043f\u0440\u0438\u0441\u0442\u0443\u043f\u044b").reduce((function(e,t){return+e+ +t.count}),0);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(x.a,{children:Object(d.jsx)("div",{className:"row d-flex justify-content-center mt-3 mb-auto",children:Object(d.jsxs)("div",{className:"col-md-6",children:[Object(d.jsxs)("h5",{children:[this.state._currentDate,Object(d.jsx)(g.a,{variant:"warning",children:o})]}),Object(d.jsx)(Le,{setDate:this.setDateFromDatepicker,currentDate:this.props.currentDate}),Object(d.jsx)(le,{sleepId:this.state.sleepId,db:this.props.db,buttons:a,setSleepId:this.setSleepId,notToday:Object(de.a)(this.props.currentDate,"yyyy-MM-dd")!==this.state.today}),Object(d.jsx)(te,{db:this.props.db,data:s,sleepId:this.state.sleepId,setSleepId:this.setSleepId,deleteItem:this.deleteItem}),Object(d.jsx)(ge,{db:this.props.db,showModal:r,handleClose:c,modal:this.handleModalFilter(t,n),drugsList:i})]})})})})}}]),n}(a.Component);var Ge=Object(pe.b)((function(e){return{buttons:e.buttons.buttons,modalShow:e.buttons.modalShow,modalType:e.buttons.modalType,modals:e.buttons.modals,items:e.data.items,currentDate:e.data.currentDate,drugs:e.settings.drugs,db:e.data.db}}),(function(e){return Object(h.a)({dispatch:e},Object(he.bindActionCreators)({disableButton:se,enableButton:ie,setItem:q,hideModal:ue,showModal:oe,setItems:Y,setDrugs:Ce,setDate:Q,setDB:V},e))}))(Ue),Xe=function(e){var t=e.setDrug,n=Object(a.useState)(""),r=Object(be.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),o=Object(be.a)(i,2),u=o[0],l=o[1];return Object(d.jsxs)(fe.a,{inline:!0,children:[Object(d.jsx)(fe.a.Control,{className:"mb-2 mr-sm-2",id:"title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:c,onChange:function(e){s(e.currentTarget.value)}}),Object(d.jsx)(fe.a.Control,{className:"mb-2 mr-sm-2",type:"number",id:"dosage",placeholder:"\u0414\u043e\u0437\u0438\u0440\u043e\u0432\u043a\u0430",value:u,onChange:function(e){l(e.currentTarget.value)}}),Object(d.jsx)(D.a,{type:"submit",className:"mb-2",onClick:function(e){e.preventDefault(),t({type:"drug",title:c,dosage:u,time:(new Date).getTime(),archive:!1}),s(""),l("")},disabled:""===c||u<=0,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},Ke=n(112),Je=n(113),Ye=function(e){var t=e.data.map((function(e){return Object(d.jsxs)(Ke.a.Item,{children:[e.title," ",Object(d.jsx)(g.a,{variant:"info",children:e.dosage})]},e._id)}));return Object(d.jsxs)(Je.a,{children:[Object(d.jsx)(Je.a.Header,{children:Object(d.jsx)("h6",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043b\u0435\u043a\u0430\u0440\u0441\u0442\u0432"})}),Object(d.jsx)(Ke.a,{children:t})]})},qe="settings",ze=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).initDB=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:if(t=e.sent,a.setState({db:t}),!(a.props.drugs.length<=0)){e.next=7;break}return e.next=7,a.getItems();case 7:case"end":return e.stop()}}),e)}))),a.getItems=Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.db,e.next=3,N(t,qe,"type","drug");case 3:(n=e.sent).length&&a.props.setDrugs(n);case 5:case"end":return e.stop()}}),e)}))),a.addItem=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.db,r=n.transaction(qe,"readwrite"),c=r.objectStore(qe),e.prev=3,e.next=6,c.add(t);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),e.t0;case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),a.setDrug=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.addItem(t);case 2:return e.next=4,a.getItems();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={db:null,drug:{type:"drug",title:"",dosage:0}},a.initDB=a.initDB.bind(Object(m.a)(a)),a.getItems=a.getItems.bind(Object(m.a)(a)),a.setDrug=a.setDrug.bind(Object(m.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.initDB()}},{key:"render",value:function(){return Object(d.jsx)(x.a,{children:Object(d.jsx)("div",{className:"row d-flex justify-content-center mt-3 mb-auto",children:Object(d.jsxs)("div",{className:"col-md-6",children:[Object(d.jsx)("h5",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(d.jsx)("div",{className:"dropdown-divider"}),Object(d.jsx)("h6",{children:"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430"}),Object(d.jsx)(Xe,{setDrug:this.setDrug}),Object(d.jsx)(Ye,{data:ke(this.props.drugs)}),Object(d.jsx)("div",{className:"dropdown-divider"})]})})})}}]),n}(a.Component);var Qe=Object(pe.b)((function(e){return{drugs:e.settings.drugs}}),(function(e){return Object(h.a)({dispatch:e},Object(he.bindActionCreators)({setDrugs:Ce,setDrug:Se},e))}))(ze),Ve=n(75),Ze=n(105),$e=n(69),et={margin:20,padding:40,dpi:2,lineWidth:4,helperLineCount:5};et.width=window.screen.width>window.screen.height?window.screen.width/2-2*et.margin:window.screen.width-2*et.margin,et.height=window.screen.height/2,et.dpiWidth=et.width*et.dpi,et.dpiHeight=et.height*et.dpi,et.viewHeight=et.dpiHeight-2*et.padding;var tt=et,nt=(n(96),function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).state={width:tt.width,height:tt.height,x:null,details:null,timeOut:null},r.canvas=Object(a.createRef)(),r.handleTouch=r.handleTouch.bind(Object(m.a)(r)),r.handleTouchLeave=r.handleTouchLeave.bind(Object(m.a)(r)),r}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.canvas.current;e.style.width=tt.width+"px",e.style.height=tt.height+"px",e.width=tt.dpiWidth,e.height=tt.dpiHeight,e.style.marginLeft=tt.margin+"px",e.style.marginRight=tt.margin+"px",this.updateCanvas()}},{key:"componentDidUpdate",value:function(e,t,n){this.updateCanvas()}},{key:"updateCanvas",value:function(){var e=this;if(this.props.data){var t=this.props.data,n=t.columns,a=t.colors,r=t.types,c=tt.dpiWidth,s=tt.dpiHeight,i=tt.viewHeight,o=c,u=this.computeBoundaries(n,r),d=Object(be.a)(u,2),l=d[0],h=d[1],p=this.canvas.current.getContext("2d");p.font="30px monospace",p.fillStyle="#96a2aa",p.clearRect(0,0,c,s);var b=Math.floor(i/(h-l)),j=o/(n[0].length-1),f=n.filter((function(e){return"line"===r[e[0]]})),O=n.filter((function(e){return"block"===r[e[0]]})),m=n.filter((function(e){return"line"!==r[e[0]]&&"block"!==r[e[0]]}))[0];if(!l&&!h)return void p.fillText("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",20,50);this.drawHelperYLines(p,l,h),this.drawHelperXText(p,m,j),f.map(this.toLineCoords(j,b)).forEach((function(t,n){var r=a[f[n][0]];e.line(p,t,{color:r})})),O.map(this.toBlockCoords(j,b)).forEach((function(t,n){var r=a[O[n][0]];e.block(p,t,{color:r})})),this.state.x&&this.drawHelperXLine(p,this.state.x)}}},{key:"toLineCoords",value:function(e,t){return function(n){return n.map((function(n,a){return[Math.floor((a-1)*e+e/3),Math.floor(tt.dpiHeight-tt.padding-n*t)]})).filter((function(e,t){return 0!==t}))}}},{key:"toBlockCoords",value:function(e,t){return function(n){return n.map((function(n,a){return[Math.floor((a-1)*e),Math.floor(tt.dpiHeight-tt.padding-n*t),e/1.5,n*t]})).filter((function(e,t){return 0!==t}))}}},{key:"computeBoundaries",value:function(e,t){var n=null,a=null;return e.forEach((function(e){if(!t["line"!==e[0]||"block"!==t[e[0]]]){"number"!==typeof n&&(n=e[1]),"number"!==typeof a&&(a=e[1]),n>e[1]&&(n=e[1]),a<e[1]&&(a=e[1]);for(var r=2;r<e.length;r++)n>e[r]&&(n=e[r]),a<e[r]&&(a=e[r])}})),[n,a]}},{key:"drawHelperXText",value:function(e,t,n){var a=Math.round(t.length/6);e.beginPath();for(var r=1;r<t.length;r+=a){var c=new Date(t[r]).getDate(),s=(r-1)*n;e.fillText(c.toString(),s,tt.dpiHeight)}e.closePath()}},{key:"drawHelperYLines",value:function(e,t,n){var a=tt.viewHeight/tt.helperLineCount,r=(n-t)/tt.helperLineCount;e.save(),e.beginPath(),e.strokeStyle="#bbb",e.lineWidth=1,e.font="20px monospace",e.fillStyle="#96a2aa";for(var c=1;c<=tt.helperLineCount;c++){var s=a*c,i=Math.round(n-r*c);e.moveTo(0,s+tt.padding),e.fillText(i.toString(),0,s+tt.padding),e.setLineDash([15,5]),e.lineTo(tt.dpiWidth,s+tt.padding)}e.stroke(),e.closePath(),e.restore()}},{key:"drawHelperXLine",value:function(e,t){e.save(),e.beginPath(),e.strokeStyle="#bbb",e.lineWidth=1,e.moveTo(t,0),e.lineTo(t,tt.dpiHeight),e.stroke(),e.closePath(),e.restore()}},{key:"line",value:function(e,t,n){var a=n.color;e.beginPath(),e.lineWidth=4,e.strokeStyle=a;var r,c=Object($e.a)(t);try{for(c.s();!(r=c.n()).done;){var s=Object(be.a)(r.value,2),i=s[0],o=s[1];e.lineTo(i,o)}}catch(u){c.e(u)}finally{c.f()}e.stroke(),e.closePath()}},{key:"block",value:function(e,t,n){var a=n.color;e.beginPath(),e.lineWidth=4,e.fillStyle=a;var r,c=Object($e.a)(t);try{for(c.s();!(r=c.n()).done;){var s=Object(be.a)(r.value,4),i=s[0],o=s[1],u=s[2],d=s[3];e.rect(i,o,u,d)}}catch(l){c.e(l)}finally{c.f()}e.stroke(),e.fill(),e.closePath()}},{key:"handleTouch",value:function(e){this.state.timeOut&&this.setState({timeOut:clearTimeout(this.state.timeOut)});var t=((e.touches?e.touches[0].clientX:e.clientX)-tt.margin)*tt.dpiWidth/tt.width,n=tt.dpiWidth/(this.props.data.columns[0].length-1),a=Math.round(this.props.data.columns[0].length-(tt.dpiWidth-t+n/2)/n);this.setState({x:t,details:0!==a&&a<=this.props.data.columns[0].length-1?{date:this.props.data.columns[0][a],attack:this.props.data.columns[1][a],strength:this.props.data.columns[2][a]}:null})}},{key:"handleTouchLeave",value:function(){var e=this;this.state.timeOut||this.setState({timeOut:setTimeout((function(){e.setState({x:null,details:null})}),2e3)})}},{key:"render",value:function(){var e=this.state.details;return Object(d.jsxs)("div",{children:[Object(d.jsx)("canvas",{ref:this.canvas,width:this.state.width,height:this.state.height,onTouchStart:this.handleTouch,onTouchMove:this.handleTouch,onTouchCancel:this.handleTouchLeave,onTouchEnd:this.handleTouchLeave,onMouseEnter:this.handleTouch,onMouseMove:this.handleTouch,onMouseLeave:this.handleTouchLeave}),Object(d.jsx)(Ve.a,{children:e?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["\u0414\u0430\u0442\u0430: ",e.date]}),Object(d.jsxs)("p",{children:["\u041a\u043e\u043b-\u0432\u043e \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u043e\u0432: ",e.attack]}),Object(d.jsxs)("p",{children:["\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0441\u0438\u043b\u0430: ",e.strength," \u0438\u0437 3"]})]}):Object(d.jsx)("p",{children:"\u0412\u044b\u0431\u0438\u0440\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u0433\u0440\u0430\u0444\u0438\u043a\u0435"})})]})}}]),n}(a.Component)),at=function(e){Object(v.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).initDB=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.call(Object(m.a)(a));case 2:if(!e.sent){e.next=6;break}return e.next=6,a.prepareData();case 6:case"end":return e.stop()}}),e)}))),a.prepareData=Object(j.a)(b.a.mark((function e(){var t,n,r,c,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.db,e.next=3,N(t,"items","date",IDBKeyRange.bound(a.state.startOfRange,a.state.endOfRange));case 3:n=e.sent,r=_e(n,"\u043f\u0440\u0438\u0441\u0442\u0443\u043f\u044b"),c=He(r),s=Re(c),i={colors:["#9a17b8","#F34C40"],columns:s,names:["Count","Strength"],types:["block","block"]},a.setState({data4Stats:We(i)});case 9:case"end":return e.stop()}}),e)}))),a.state={month:Object(de.a)(new Date,"yyyy-MM"),startOfRange:Object(de.a)(Object(Ee.a)(new Date),"yyyy-MM-dd"),endOfRange:Object(de.a)(Object(Ze.a)(new Date),"yyyy-MM-dd"),data4Stats:null},a.initDB=a.initDB.bind(Object(m.a)(a)),a.prepareData=a.prepareData.bind(Object(m.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.initDB()}},{key:"componentDidUpdate",value:function(e,t,n){t.startOfRange!==this.state.startOfRange&&t.endOfRange!==this.state.endOfRange&&this.prepareData()}},{key:"render",value:function(){var e=this;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ve.a,{children:Object(d.jsx)(Ie.a,{className:"date-picker",children:Object(d.jsx)(fe.a,{children:Object(d.jsx)(fe.a.Control,{type:"month",className:"month-picker-input",onKeyDown:function(e){return e.preventDefault()},value:this.state.month,onChange:function(t){var n=t.currentTarget.value;e.setState({month:n,startOfRange:Object(de.a)(Object(Ee.a)(new Date(n)),"yyyy-MM-dd"),endOfRange:Object(de.a)(Object(Ze.a)(new Date(n)),"yyyy-MM-dd")})}})})})}),Object(d.jsx)(nt,{data:this.state.data4Stats})]})}}]),n}(a.Component);var rt=Object(pe.b)((function(e){return{db:e.data.db}}),(function(e){return Object(h.a)({dispatch:e},Object(he.bindActionCreators)({setDB:V},e))}))(at);function ct(){return Object(d.jsxs)(s.a,{basename:"/EpilepticDiary",children:[Object(d.jsx)(l,{}),Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{path:"/settings",children:Object(d.jsx)(Qe,{})}),Object(d.jsx)(i.b,{path:"/stats",children:Object(d.jsx)(rt,{})}),Object(d.jsx)(i.b,{path:"/",children:Object(d.jsx)(Ge,{})}),Object(d.jsx)(i.a,{to:"/"})]})]})}var st=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(97);function it(e){return bt.dispatch(oe(e.currentTarget.dataset.type))}var ot={buttons:[{type:"\u0421\u043e\u043d",subType:"\u043d\u0430\u0447\u0430\u043b\u043e",icon:"fa-bed",disabled:!1,variant:"primary"},{type:"\u0415\u0434\u0430",icon:"fa-cutlery",disabled:!1,variant:"success",onClick:it},{type:"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430",icon:"fa-medkit",disabled:!1,variant:"danger",onClick:it},{type:"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u044b",icon:"fa-heartbeat",disabled:!1,variant:"epi",onClick:it},{type:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",icon:"fa-check",disabled:!1,variant:"info",onClick:it}],modalShow:!1,modalType:"",modals:[{type:"\u0435\u0434\u0430",description:!0,drugs:!1,count:!1,series:!1,variant:"success",strength:!1},{type:"\u041b\u0435\u043a\u0430\u0440\u0441\u0442\u0432\u0430",drugs:!0,description:!1,count:!1,series:!1,strength:!1,variant:"danger"},{type:"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u044b",count:!0,series:!0,strength:!0,description:!1,drugs:!1,variant:"epi"},{type:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f",count:!1,series:!1,strength:!1,description:!0,variant:"info",drugs:!1}]},ut={currentDate:(new Date).getTime(),db:null,items:[]},dt={drugs:[]},lt=Object(he.combineReducers)({buttons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:var n=Object(ve.a)(e.buttons),a=n.findIndex((function(e){return e.type===t.payload.type}));return n[a].disabled=!0,Object(h.a)(Object(h.a)({},e),{},{buttons:Object(ve.a)(n)});case ae:var r=Object(ve.a)(e.buttons),c=r.findIndex((function(e){return e.type===t.payload.type}));return r[c].disabled=!1,Object(h.a)(Object(h.a)({},e),{},{buttons:Object(ve.a)(r)});case re:return Object(h.a)(Object(h.a)({},e),{},{modalShow:!0,modalType:t.payload.modalType});case ce:return Object(h.a)(Object(h.a)({},e),{},{modalShow:!1,modalType:""});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(h.a)(Object(h.a)({},e),{},{db:t.payload.db});case U:return Object(h.a)(Object(h.a)({},e),{},{items:ke([].concat(Object(ve.a)(e.items),[t.payload.item]))});case G:return Object(h.a)(Object(h.a)({},e),{},{items:ke(t.payload.items)});case X:var n=t.payload.item,a=e.items.findIndex((function(e){return e.time===n.time}));if(-1===a)return Object(h.a)({},e);var r=Object(ve.a)(e.items);return r.splice(a,1,n),Object(h.a)(Object(h.a)({},e),{},{items:ke(Object(ve.a)(r))});case K:return Object(h.a)(Object(h.a)({},e),{},{currentDate:new Date(t.payload.date).getTime()});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(h.a)(Object(h.a)({},e),{},{drugs:t.payload.drugs});case De:return Object(h.a)(Object(h.a)({},e),{},{drugs:[].concat(Object(ve.a)(e.drugs),[t.payload.drug])});default:return e}}}),ht=n(77),pt=n(78),bt=Object(he.createStore)(lt,Object(pt.composeWithDevTools)(Object(he.applyMiddleware)(ht.a)));c.a.render(Object(d.jsx)(pe.a,{store:bt,children:Object(d.jsx)(ct,{})}),document.getElementById("root")),st()}},[[98,1,2]]]);
//# sourceMappingURL=main.f79631c4.chunk.js.map