{"version":3,"sources":["components/rating/Rating.component.js","_functions/db.js","store/data/actionTypes.js","store/data/actions.js","components/timeline/Element.component.js","components/timeline/List.component.js","store/buttonsPanel/actionTypes.js","store/buttonsPanel/actions.js","components/buttonsPanel/ButtonsPanel.component.js","components/modalPage/Description.ModalPage.js","components/modalPage/Attack.ModalPage.js","components/modalPage/Drugs.ModalPage.js","components/modalPage/ModalPage.component.js","_functions/handlersData.js","store/settings/actionTypes.js","store/settings/actions.js","components/home/Home.component.js","components/navbar/AppNavbar.component.js","components/settings/DrugForm.component.js","components/settings/DrugsList.js","components/settings/Settings.component.js","App.js","reportWebVitals.js","_functions/handleModal.js","store/buttonsPanel/reducers.js","store/data/reducers.js","store/settings/reducers.js","store/reducers.js","index.js"],"names":["ratingArray","Rating","count","_renderedStars","map","item","className","initializeDB","a","openDB","upgrade","database","createObjectStore","keyPath","autoIncrement","createIndex","get","db","key","idxPath","idxVal","tx","transaction","items","index","store","iterate","cursor","push","value","getOne","storeName","itemsStore","objectStore","add","put","SET_ITEM","SET_ITEMS","RESET_ITEM","setItems","type","payload","setItem","resetItem","formatTime","time","date","Date","Intl","DateTimeFormat","hour","minute","format","getSleepDuration","timeStart","timeEnd","duration","durationStr","hourDuration","Math","trunc","minuteDuration","Element","drugs","subType","description","color","quality","strength","series","sleepId","setSleepId","_renderedDrugs","drug","idx","title","dosage","endSleepButton","Button","variant","onClick","getTime","dispatch","data-type","data-sub-type","data-color","toLowerCase","List","data","element","DISABLE_BUTTON","ENABLE_BUTTON","SHOW_MODAL","HIDE_MODAL","disableButton","buttonType","enableButton","showModal","modalType","hideModal","ButtonsPanel","buttons","_renderedButtons","button","icon","disabled","e","currentTarget","dataset","aria-hidden","Description","handleClose","handleSubmit","useState","setDescription","Modal","Body","Form","Group","controlId","Label","Control","as","rows","onChange","Text","Footer","Attack","setCount","setSeries","setStrength","rangeDescription","setRangeDescription","textClass","setTextClass","useEffect","inline","style","justifyContent","Check","id","label","checked","placeholder","width","min","max","step","Drugs","drugsList","setDrugs","handleChecked","_drugs","findIndex","_id","toString","length","CustomLink","to","Badge","data-id","filter","activeOnlyWhenExact","match","useRouteMatch","path","exact","ModalPageComponent","modal","show","setShow","onHide","Header","closeButton","Title","sortData","sort","b","SET_DRUG","SET_DRUGS","setDrug","ITEMS","HomeComponent","props","initDB","setState","getItems","state","currentDate","subDays","subDaysItem","addItem","handlerShowModal","handleModalFilter","modals","_currentDate","day","month","year","bind","this","modalShow","Container","Component","connect","settings","bindActionCreators","AppNavbar","Navbar","collapseOnSelect","expand","bg","Toggle","aria-controls","Collapse","Nav","DrugForm","setTitle","setDosage","preventDefault","archive","DrugList","_renderedList","ListGroup","Item","Card","SETTINGS","Settings","setting","settingsStore","DrugsList","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","handleShowModal","initialState","combineReducers","action","newItems","splice","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d0072092.chunk.js","sourcesContent":["import React from 'react';\r\nimport './rating.styles.css';\r\n\r\nconst ratingArray = [1, 2, 3];\r\nconst Rating = ({count}) => {\r\n\tconst _renderedStars = ratingArray.map((item) => {\r\n\t\treturn (<span key={item} className={`fa fa-star ${item <= count && 'checked'}`}/>)\r\n\t})\r\n\treturn (\r\n\t\t<span className={'rating'} >\r\n\t\t\t{_renderedStars}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nexport default Rating;\r\n","import {openDB} from \"idb/with-async-ittr\";\r\n\r\nexport async function initializeDB() {\r\n\treturn await openDB('epileptic_diary', 1, {\r\n\t\tupgrade(database) {\r\n\t\t\tconst store = database.createObjectStore('items', {keyPath: '_id', autoIncrement: true});\r\n\t\t\tstore.createIndex('date', 'date');\r\n\t\t\tconst settingsStore = database.createObjectStore('settings', {keyPath: '_id', autoIncrement: true});\r\n\t\t\tsettingsStore.createIndex('type', 'type');\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport async function get(db, key, idxPath, idxVal) {\r\n\tlet tx = db.transaction(key);\r\n\r\n\tlet items = [];\r\n\r\n\tconst index = tx.store.index(idxPath);\r\n\t\r\n\tfor await (const cursor of index.iterate(idxVal)) {\r\n\t\titems.push(cursor.value);\r\n\t}\r\n\r\n\treturn items;\r\n}\r\n\r\nexport async function getOne(db, storeName, key) {\r\n\tlet tx = db.transaction('items');\r\n\tlet itemsStore = tx.objectStore(storeName);\r\n\treturn itemsStore.get(key);\r\n}\r\n\r\nexport async function add(db, item, storeName) {\r\n\tlet tx = db.transaction(storeName, 'readwrite');\r\n\tlet itemsStore = tx.objectStore(storeName);\r\n\ttry {\r\n\t\treturn await itemsStore.add(item);\r\n\t} catch (e) {\r\n\t\tthrow e;\r\n\t}\r\n}\r\n\r\nexport async function put(db, item, storeName) {\r\n\tlet tx = db.transaction(storeName, 'readwrite');\r\n\tlet itemsStore = tx.objectStore(storeName);\r\n\t\r\n\ttry {\r\n\t\tawait itemsStore.put(item);\r\n\t} catch (e) {\r\n\t\tthrow e;\r\n\t}\r\n}","export const SET_ITEM = 'SET_ITEM';\r\nexport const SET_ITEMS = 'SET_ITEMS';\r\nexport const RESET_ITEM = 'RESET_ITEM';","import {RESET_ITEM, SET_ITEM, SET_ITEMS} from \"./actionTypes\";\r\n\r\nexport const setItems = (items) => {\r\n\treturn {\r\n\t\ttype: SET_ITEMS,\r\n\t\tpayload: {\r\n\t\t\titems\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const setItem = (item) => {\r\n\treturn {\r\n\t\ttype: SET_ITEM,\r\n\t\tpayload: {\r\n\t\t\titem\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const resetItem = (item) => {\r\n\treturn {\r\n\t\ttype: RESET_ITEM,\r\n\t\tpayload: {\r\n\t\t\titem\r\n\t\t}\r\n\t}\r\n}","import React from 'react';\r\nimport Rating from \"../rating/Rating.component\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {getOne, put} from \"../../_functions/db\";\r\nimport {resetItem} from \"../../store/data/actions\";\r\nimport {store} from \"../../index\";\r\n\r\nconst formatTime = (time) => {\r\n\tconst date = new Date(time);\r\n\treturn new Intl.DateTimeFormat('ru-RU', {hour: 'numeric', minute:'numeric'}).format(date);\r\n}\r\n\r\nconst getSleepDuration = (timeStart, timeEnd) => {\r\n\tconst hour = 60*60*1000;\r\n\tconst minute = 60*1000;\r\n\tconst duration = timeEnd - timeStart;\r\n\tlet durationStr = '';\r\n\tconst hourDuration = Math.trunc(duration / hour);\r\n\tconst minuteDuration = Math.trunc((duration - hourDuration*hour) / minute);\r\n\t\r\n\tif (hourDuration > 0) {\r\n\t\tdurationStr += `${hourDuration} часов и `\r\n\t}\r\n\tdurationStr += `${minuteDuration} минут`\r\n\treturn durationStr\r\n}\r\n\r\nconst Element = ({db, type, drugs = [], subType, description, time, color, quality, strength, count, series, timeEnd, sleepId, setSleepId}) => {\r\n\tconst _renderedDrugs = drugs.map((drug, idx) => {\r\n\t\tconst {title, dosage} = drug;\r\n\t\treturn (\r\n\t\t\t<li key={idx}>{title} - {dosage}</li>\r\n\t\t)\r\n\t});\r\n\t\r\n\tconst endSleepButton = (\r\n\t\t<Button variant={'primary'}\r\n\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\tconst item = await getOne(db, 'items', sleepId);\r\n\t\t\t\t\t\t\titem.subType = 'конец';\r\n\t\t\t\t\t\t\titem.timeEnd = new Date().getTime();\r\n\t\t\t\t\t\t\tawait put(db, item, 'items');\r\n\t\t\t\t\t\t\tsetSleepId(-1);\r\n\t\t\t\t\t\t\tstore.dispatch(resetItem(item));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tdata-type={'Сон'}\r\n\t\t\t\t\t\tdata-sub-type={'конец'}\r\n\t\t\t\t\t\tdata-color={'badge-primary'}\r\n\t\t>\r\n\t\t\t{'Пробуждение'}\r\n\t\t</Button>\r\n\t)\r\n\t\r\n\treturn (\r\n\t\t<div className=\"vertical-timeline-item vertical-timeline-element\">\r\n\t\t\t<div>\r\n\t\t\t\t<span className=\"vertical-timeline-element-icon bounce-in\">\r\n\t\t\t\t\t<i className={`badge badge-dot badge-dot-xl ${color}`}> </i>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div className=\"vertical-timeline-element-content bounce-in\">\r\n\t\t\t\t\t<h4 className=\"timeline-title\">{type}{count && ` - ${count}`}</h4>\r\n\t\t\t\t\t{(type.toLowerCase() === 'сон' && subType.toLowerCase() !== 'конец') && endSleepButton}\r\n\t\t\t\t\t{(type.toLowerCase() === 'сон' && subType.toLowerCase() === 'конец' && timeEnd) && <div><b>Пробуждение:</b> {formatTime(timeEnd)}</div>}\r\n\t\t\t\t\t{(type.toLowerCase() === 'сон' && subType.toLowerCase() === 'конец' && timeEnd) && <div><b>Продолжительность:</b> {getSleepDuration(time, timeEnd)}</div>}\r\n\t\t\t\t\t{description && <p>{description}</p>}\r\n\t\t\t\t\t{quality && <span>Качество сна: <Rating count={quality}/></span>}\r\n\t\t\t\t\t{series && <div><b>Серия</b></div>}\r\n\t\t\t\t\t{strength && <span>Сила приступов: <Rating count={strength}/></span>}\r\n\t\t\t\t\t{drugs && _renderedDrugs}\r\n\t\t\t\t\t<span className=\"vertical-timeline-element-date\">{formatTime(time)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Element;\r\n","import React from 'react';\r\nimport Element from \"./Element.component\";\r\n\r\nconst List = ({db, data, sleepId, setSleepId}) => {\r\n\treturn data.map((element, idx) => {\r\n\t\treturn (\r\n\t\t\t<div key={idx} className=\"vertical-timeline vertical-timeline--animate vertical-timeline--one-column\">\r\n\t\t\t\t<Element db={db} {...element} sleepId={sleepId} setSleepId={setSleepId}/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport default List;\r\n","export const DISABLE_BUTTON = 'DISABLE_BUTTON';\r\nexport const ENABLE_BUTTON = 'ENABLE_BUTTON';\r\nexport const SHOW_MODAL = 'SHOW_MODAL';\r\nexport const HIDE_MODAL = 'HIDE_MODAL';","import {DISABLE_BUTTON, ENABLE_BUTTON, HIDE_MODAL, SHOW_MODAL} from \"./actionTypes\";\r\n\r\nexport const disableButton = (buttonType) => {\r\n\treturn {\r\n\t\ttype: DISABLE_BUTTON,\r\n\t\tpayload: {\r\n\t\t\ttype: buttonType\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const enableButton = (buttonType) => {\r\n\treturn {\r\n\t\ttype: ENABLE_BUTTON,\r\n\t\tpayload: {\r\n\t\t\ttype: buttonType\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const showModal = (modalType) => {\r\n\treturn {\r\n\t\ttype: SHOW_MODAL,\r\n\t\tpayload: {\r\n\t\t\tmodalType: modalType\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const hideModal = () => {\r\n\treturn {\r\n\t\ttype: HIDE_MODAL\r\n\t}\r\n}","import React from 'react';\r\nimport {Button} from \"react-bootstrap\";\r\nimport './ButtonsPanel.styles.css';\r\nimport {add} from \"../../_functions/db\";\r\nimport {store} from \"../../index\";\r\nimport {disableButton, enableButton} from \"../../store/buttonsPanel/actions\";\r\nimport {setItem} from \"../../store/data/actions\";\r\nimport {format} from \"date-fns\";\r\n\r\nconst ButtonsPanel = ({sleepId, db, buttons, setSleepId}) => {\r\n\tconst _renderedButtons = buttons.map((button, idx) => {\r\n\t\tconst {variant, onClick, icon, type, subType} = button;\r\n\t\treturn (\r\n\t\t\t<Button key={idx}\r\n\t\t\t\t\t\t\tvariant={variant}\r\n\t\t\t\t\t\t\tdisabled={(sleepId !== -1) && (type.toLowerCase() === 'сон') }\r\n\t\t\t\t\t\t\tonClick={onClick ? onClick : async (e) => {\r\n\t\t\t\t\t\t\t\tconst {type, subType, color} = e.currentTarget.dataset;\r\n\t\t\t\t\t\t\t\tconst {disabled} = e.currentTarget.disabled;\r\n\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\t\t\t\tsubType: subType,\r\n\t\t\t\t\t\t\t\t\ttime: new Date().getTime(),\r\n\t\t\t\t\t\t\t\t\tcolor: `badge-${color}`,\r\n\t\t\t\t\t\t\t\t\tdate: format(new Date(), 'yyyy-MM-dd')\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetSleepId(await add(db, item, 'items'));\r\n\t\t\t\t\t\t\t\tif (!disabled) {\r\n\t\t\t\t\t\t\t\t\tstore.dispatch(disableButton(type));\r\n\t\t\t\t\t\t\t\t\tstore.dispatch(setItem(item));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tstore.dispatch(enableButton(type));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdata-type={type}\r\n\t\t\t\t\t\t\tdata-sub-type={subType}\r\n\t\t\t\t\t\t\tdata-color={variant}\r\n\t\t\t>\r\n\t\t\t\t<i className={`fa ${icon}`} aria-hidden=\"true\"/>\r\n\t\t\t</Button>\r\n\t\t)\r\n\t})\r\n\treturn (\r\n\t\t<div className={'buttons-panel'}>\r\n\t\t\t{_renderedButtons}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ButtonsPanel;\r\n","import React, {useState} from 'react';\r\nimport {Button, Form, Modal} from \"react-bootstrap\";\r\n\r\nexport const Description = ({handleClose, handleSubmit}) => {\r\n\tconst [description, setDescription] = useState('');\r\n\tconst handleChange = (e) => {\r\n\t\tsetDescription(e.currentTarget.value);\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form>\r\n\t\t\t\t\t<Form.Group controlId=\"formDescription\">\r\n\t\t\t\t\t\t<Form.Label>Описание</Form.Label>\r\n\t\t\t\t\t\t<Form.Control as=\"textarea\" rows={3} value={description} onChange={handleChange}/>\r\n\t\t\t\t\t\t<Form.Text className=\"text-muted\">\r\n\t\t\t\t\t\t\tВведите описание\r\n\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\r\n\t\t\t\t\tОтмена\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\tdescription: description,\r\n\t\t\t\t\t\t\ttype: 'Еда',\r\n\t\t\t\t\t\t\tcolor: 'badge-success'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandleSubmit(item)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdisabled={!description}\r\n\t\t\t\t>\r\n\t\t\t\t\tДобавить\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</>\r\n\t)\r\n}","import React, {useEffect, useState} from 'react';\r\nimport {Button, Form, Modal} from \"react-bootstrap\";\r\n\r\nexport const Attack = ({handleClose, handleSubmit}) => {\r\n\tconst [count, setCount] = useState(1);\r\n\tconst [series, setSeries] = useState(false);\r\n\tconst [strength, setStrength] = useState(1);\r\n\tconst [rangeDescription, setRangeDescription] = useState('Слабый приступ');\r\n\tconst [textClass, setTextClass] = useState('secondary');\r\n\t\r\n\tuseEffect(() => {\r\n\t\tswitch (strength) {\r\n\t\t\tcase '1': {\r\n\t\t\t\tsetTextClass('secondary')\r\n\t\t\t\tsetRangeDescription('Слабый приступ');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcase '2': {\r\n\t\t\t\tsetTextClass('warning')\r\n\t\t\t\tsetRangeDescription('Средний приступ');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcase '3': {\r\n\t\t\t\tsetTextClass('danger')\r\n\t\t\t\tsetRangeDescription('Сильный приступ');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdefault: {\r\n\t\t\t\tsetTextClass('secondary')\r\n\t\t\t\tsetRangeDescription('Слабый приступ');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}, [strength]);\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form inline style={{justifyContent: 'space-between'}}>\r\n\t\t\t\t\t<Form.Group controlId={'formAttackSeries'} className=\"mb-2 mr-sm-2\">\r\n\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\ttype={'checkbox'}\r\n\t\t\t\t\t\t\tid={'checkbox-series'}\r\n\t\t\t\t\t\t\tlabel={'Серийные приступы?'}\r\n\t\t\t\t\t\t\tchecked={series}\r\n\t\t\t\t\t\t\tonChange={() => {\r\n\t\t\t\t\t\t\t\tsetSeries(!series)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Form.Group controlId={'formAttackCount'} className=\"mb-2 mr-sm-2\">\r\n\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\ttype={'number'}\r\n\t\t\t\t\t\t\tplaceholder={'Кол-во приступов'}\r\n\t\t\t\t\t\t\tvalue={count}\r\n\t\t\t\t\t\t\tdisabled={!series}\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetCount(e.currentTarget.value)\r\n\t\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Form.Group controlId=\"formAttackStrength\" className={'mb-2'} style={{width: '100%'}}>\r\n\t\t\t\t\t\t<Form.Label>{`Сила приступа:`}</Form.Label>\r\n\t\t\t\t\t\t<Form.Control type=\"range\" min={1} max={3} value={strength} step={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setStrength(e.currentTarget.value)}/>\r\n\t\t\t\t\t\t<Form.Text className={`text-${textClass}`}>{rangeDescription}</Form.Text>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\r\n\t\t\t\t\tОтмена\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button variant=\"primary\" onClick={() => {\r\n\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\ttype: 'Приступы',\r\n\t\t\t\t\t\tcount: count,\r\n\t\t\t\t\t\tseries: series,\r\n\t\t\t\t\t\tstrength: strength,\r\n\t\t\t\t\t\tcolor: 'badge-warning'\r\n\t\t\t\t\t};\r\n\t\t\t\t\thandleSubmit(item)\r\n\t\t\t\t}}>\r\n\t\t\t\t\tДобавить\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</>\r\n\t)\r\n}","import React, {useState} from 'react';\r\nimport {Badge, Button, Form, Modal} from \"react-bootstrap\";\r\nimport {Link, useRouteMatch} from \"react-router-dom\";\r\n\r\nexport const Drugs = ({drugsList = [], handleClose, handleSubmit}) => {\r\n\tconst [drugs, setDrugs] = useState(() => drugsList.map((drug) => {\r\n\t\tdrug.checked = false;\r\n\t\treturn drug;\r\n\t}));\r\n\t\r\n\tconst handleChecked = (e) => {\r\n\t\tconst {id} = e.currentTarget.dataset;\r\n\t\tconst _drugs = [...drugs];\r\n\t\tconst idx = _drugs.findIndex(drug => drug._id.toString() === id.toString());\r\n\t\tif (idx !== -1) {\r\n\t\t\t_drugs[idx].checked = !_drugs[idx].checked;\r\n\t\t\tsetDrugs(_drugs);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t{drugs.length === 0 && <h3>Нет ни одного лекарства, перейдите в <CustomLink to={'/settings'} label={'настройки'}/></h3>}\r\n\t\t\t\t<Form>\r\n\t\t\t\t\t{drugs.map((drug,) => {\r\n\t\t\t\t\t\tconst label = <span>{drug.title} <Badge variant={'info'}>{drug.dosage}</Badge></span>\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Form.Group controlId={`formDrug-${drug.title}-${drug.dosage}`} key={`${drug.title}-${drug.dosage}`}>\r\n\t\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t\ttype={'checkbox'}\r\n\t\t\t\t\t\t\t\t\tdata-id={drug?._id}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChecked}\r\n\t\t\t\t\t\t\t\t\tvalue={drug.checked}\r\n\t\t\t\t\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button variant=\"secondary\" onClick={handleClose}>\r\n\t\t\t\t\tОтмена\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\ttype: 'Лекарства',\r\n\t\t\t\t\t\t\tdrugs: drugs.filter(drug => drug.checked),\r\n\t\t\t\t\t\t\tcolor: 'badge-danger'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandleSubmit(item);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdisabled={drugs.length === 0 || drugs.filter(drug => drug.checked).length === 0}\r\n\t\t\t\t>\r\n\t\t\t\t\tДобавить\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nfunction CustomLink({ label, to, activeOnlyWhenExact }) {\r\n\tlet match = useRouteMatch({\r\n\t\tpath: to,\r\n\t\texact: activeOnlyWhenExact\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<span className={match ? \"active\" : \"\"}>\r\n\t\t\t{match && \"> \"}\r\n\t\t\t<Link to={to}>{label}</Link>\r\n\t\t</span>\r\n\t);\r\n}","import React, {useEffect, useState} from 'react';\r\nimport {Modal} from \"react-bootstrap\";\r\nimport {Description} from './Description.ModalPage';\r\nimport {Attack} from './Attack.ModalPage';\r\nimport {setItem} from \"../../store/data/actions\";\r\nimport {store} from \"../../index\";\r\nimport {hideModal} from \"../../store/buttonsPanel/actions\";\r\nimport {Drugs} from \"./Drugs.ModalPage\";\r\nimport {add} from \"../../_functions/db\";\r\nimport {format} from 'date-fns';\r\n\r\nconst ModalPageComponent = ({db, handleClose, showModal, modal = {}, drugsList}) => {\r\n\tconst {type, description, drugs, count, series, strength} = modal;\r\n\tconst [show, setShow] = useState(false);\r\n\t\r\n\tconst handleSubmit = async (item) => {\r\n\t\titem.time = new Date().getTime();\r\n\t\titem.date = format(new Date(), 'yyyy-MM-dd');\r\n\t\tawait add(db, item, 'items');\r\n\t\tstore.dispatch(setItem(item));\r\n\t\tstore.dispatch(hideModal());\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (show === showModal) return;\r\n\t\tsetShow(showModal);\r\n\t}, [showModal, show]);\r\n\t\r\n\treturn (\r\n\t\t<Modal show={show} onHide={handleClose}>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title>{type}</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t{description && <Description handleClose={handleClose} handleSubmit={handleSubmit} />}\r\n\t\t\t{(count && series && strength) && <Attack handleClose={handleClose} handleSubmit={handleSubmit} />}\r\n\t\t\t{drugs && <Drugs drugsList={drugsList} handleClose={handleClose} handleSubmit={handleSubmit} />}\r\n\t\t\t{/*<Modal.Body>*/}\r\n\t\t\t{/*\t<Form>*/}\r\n\t\t\t{/*\t\t{description && <Description setDescription={setDescription}/>}*/}\r\n\t\t\t{/*\t\t*/}\r\n\t\t\t{/*\t\t{drugs && <Drugs setDrugs={setDrugs}/>}*/}\r\n\t\t\t{/*\t\t*/}\r\n\t\t\t{/*\t\t{(count && series && strength) && <Attack />}*/}\r\n\t\t\t{/*\t</Form>*/}\r\n\t\t\t{/*</Modal.Body>*/}\r\n\t\t\t{/*<Modal.Footer>*/}\r\n\t\t\t{/*\t<Button variant=\"secondary\" onClick={handleClose}>*/}\r\n\t\t\t{/*\t\tЗакрыть*/}\r\n\t\t\t{/*\t</Button>*/}\r\n\t\t\t{/*\t<Button variant=\"primary\" onClick={() => {*/}\r\n\t\t\t{/*\t\tconst item = {*/}\r\n\t\t\t{/*\t\t\tdescription: formDescription,*/}\r\n\t\t\t{/*\t\t\t*/}\r\n\t\t\t{/*\t\t}*/}\r\n\t\t\t{/*\t\thandleSubmit(item)*/}\r\n\t\t\t{/*\t}}>*/}\r\n\t\t\t{/*\t\tДобавить*/}\r\n\t\t\t{/*\t</Button>*/}\r\n\t\t\t{/*</Modal.Footer>*/}\r\n\t\t</Modal>\r\n\t)\r\n}\r\n\r\n\r\n// modals: [\r\n// \t{\r\n// \t\ttype: 'еда',\r\n// \t\tdescription: true,\r\n// \t\tdrugs: false,\r\n// \t\tcount: false,\r\n// \t\tseries: false,\r\n// \t\tstrength: false,\r\n// \t},\r\n// \t{\r\n// \t\ttype: 'Лекарства',\r\n// \t\tdrugs: true,\r\n// \t\tdescription: false,\r\n// \t\tcount: false,\r\n// \t\tseries: false,\r\n// \t\tstrength: false,\r\n// \t},\r\n// \t{\r\n// \t\ttype: 'Приступы',\r\n// \t\tcount: true,\r\n// \t\tseries: true,\r\n// \t\tstrength: true,\r\n// \t\tdescription: false,\r\n// \t\tdrugs: false\r\n// \t}\r\n// ]\r\n\r\nexport default ModalPageComponent;\r\n","export const sortData = (data) => data.sort((a, b) => {\r\n\tif (a.time > b.time) return -1;\r\n\treturn 1;\r\n});","export const SET_DRUG = 'SET_DRUG';\r\nexport const SET_DRUGS = 'SET_DRUGS';\r\n","import {SET_DRUG, SET_DRUGS} from './actionTypes';\r\n\r\nexport const setDrug = (drug) => {\r\n\treturn {\r\n\t\ttype: SET_DRUG,\r\n\t\tpayload: {\r\n\t\t\tdrug\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const setDrugs = (drugs) => {\r\n\treturn {\r\n\t\ttype: SET_DRUGS,\r\n\t\tpayload: {\r\n\t\t\tdrugs\r\n\t\t}\r\n\t}\r\n}","import React, {Component} from \"react\";\nimport {Container} from \"react-bootstrap\";\nimport List from \"../timeline/List.component\";\nimport '../../App.css';\nimport ButtonsPanel from \"../buttonsPanel/ButtonsPanel.component\";\nimport {bindActionCreators} from \"redux\";\nimport {disableButton, enableButton, hideModal, showModal} from \"../../store/buttonsPanel/actions\";\nimport {connect} from \"react-redux\";\nimport {setItem, setItems} from \"../../store/data/actions\";\nimport ModalPageComponent from \"../modalPage/ModalPage.component\";\nimport {get, initializeDB} from \"../../_functions/db\";\nimport {format, subDays} from 'date-fns';\nimport {sortData} from \"../../_functions/handlersData\";\nimport {setDrugs} from \"../../store/settings/actions\";\n\nconst ITEMS = 'items';\nconst SETTINGS = 'settings';\nconst READWRITE = 'readwrite';\n\nclass HomeComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdb: null,\n\t\t\t_currentDate: new Intl.DateTimeFormat('ru-RU', {\n\t\t\t\tday: 'numeric',\n\t\t\t\tmonth: 'long',\n\t\t\t\tyear: 'numeric'\n\t\t\t}).format(new Date(this.props.currentDate)),\n\t\t\tsleepId: -1,\n\t\t}\n\t\tthis.handlerShowModal = this.handlerShowModal.bind(this);\n\t\tthis.handleModalFilter = this.handleModalFilter.bind(this);\n\t\tthis.initDB = this.initDB.bind(this);\n\t\tthis.getItems = this.getItems.bind(this);\n\t\tthis.addItem = this.addItem.bind(this);\n\t\tthis.setSleepId = this.setSleepId.bind(this);\n\t}\n\t\n\tinitDB = async () => {\n\t\tconst db = await initializeDB();\n\t\t\n\t\tthis.setState({db: db});\n\t\t\n\t\tawait this.getItems();\n\t}\n\t\n\tgetItems = async () => {\n\t\tconst {db} = this.state;\n\t\tconst idxVal = format(new Date(this.props.currentDate), 'yyyy-MM-dd');\n\t\tlet items = await get(db, ITEMS, 'date', idxVal);\n\t\tlet subDaysItem = sortData(await get(db, ITEMS, 'date', format(subDays(new Date(this.props.currentDate), 1), 'yyyy-MM-dd')));\n\t\t\n\t\tif (subDaysItem[0]?.type.toLowerCase() === 'сон') {\n\t\t\titems.push(subDaysItem[0]);\n\t\t}\n\t\t\n\t\tconst idx = items.findIndex((item) => {\n\t\t\tif (item.subType) {\n\t\t\t\treturn item?.subType.toLowerCase() === 'начало'\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (idx !== -1) {\n\t\t\tthis.setSleepId(items[idx]._id);\n\t\t}\n\t\t\n\t\tif (items.length) {\n\t\t\tthis.props.setItems(items);\n\t\t}\n\t\t\n\t\tlet drugs = await get(db, SETTINGS, 'type', 'drug');\n\t\tif (drugs.length) {\n\t\t\tthis.props.setDrugs(drugs);\n\t\t}\n\t}\n\t\n\taddItem = async (item) => {\n\t\tconst {db} = this.state;\n\t\tlet tx = db.transaction(ITEMS, READWRITE);\n\t\tlet itemsStore = tx.objectStore(ITEMS);\n\t\ttry {\n\t\t\tawait itemsStore.add(item);\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.initDB();\n\t}\n\t\n\thandlerShowModal = () => {\n\t\tthis.props.showModal();\n\t}\n\t\n\tsetSleepId = (id) => {\n\t\tthis.setState({sleepId: id});\n\t}\n\t\n\thandleModalFilter = ((modalType, modals = []) => {\n\t\tconst idx = modals.findIndex(({type}) => modalType.toLowerCase() === type.toLowerCase());\n\t\treturn modals[idx];\n\t});\n\t\n\trender() {\n\t\tconst {modalType, modals, buttons, modalShow, hideModal, items, drugs} = this.props;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Container>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"row d-flex justify-content-center mt-3 mb-auto\">\n\t\t\t\t\t\t<div className=\"col-md-6\">\n\t\t\t\t\t\t\t<h5>{this.state._currentDate}</h5>\n\t\t\t\t\t\t\t<ButtonsPanel sleepId={this.state.sleepId} db={this.state.db} buttons={buttons}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSleepId={this.setSleepId}/>\n\t\t\t\t\t\t\t<List db={this.state.db} data={items} sleepId={this.state.sleepId} setSleepId={this.setSleepId}/>\n\t\t\t\t\t\t\t<ModalPageComponent db={this.state.db} showModal={modalShow} handleClose={hideModal}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodal={this.handleModalFilter(modalType, modals)} drugsList={drugs}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Container>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tbuttons: state.buttons.buttons,\n\t\tmodalShow: state.buttons.modalShow,\n\t\tmodalType: state.buttons.modalType,\n\t\tmodals: state.buttons.modals,\n\t\titems: state.data.items,\n\t\tcurrentDate: state.data.currentDate,\n\t\tdrugs: state.settings.drugs\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tdispatch,\n\t\t...bindActionCreators({disableButton, enableButton, setItem, hideModal, showModal, setItems, setDrugs}, dispatch)\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeComponent);\n","import React from 'react';\r\nimport {Nav, Navbar} from \"react-bootstrap\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default function AppNavbar() {\r\n\treturn (\r\n\t\t<Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n\t\t\t<Link className={'navbar-brand'} to=\"/\">Дневник</Link>\r\n\t\t\t<Navbar.Toggle aria-controls=\"responsive-navbar-nav\"/>\r\n\t\t\t<Navbar.Collapse id=\"responsive-navbar-nav\">\r\n\t\t\t\t<Nav>\r\n\t\t\t\t\t<Link className={'nav-link'} to=\"/settings\">Настройки</Link>\r\n\t\t\t\t\t<Link className={'nav-link'} to=\"/stats\" disabled>Статистика</Link>\r\n\t\t\t\t</Nav>\r\n\t\t\t</Navbar.Collapse>\r\n\t\t</Navbar>\r\n\t)\r\n}","import React, {useState} from 'react';\r\nimport {Button, Form} from \"react-bootstrap\";\r\n\r\nconst DrugForm = ({setDrug}) => {\r\n\tconst [title, setTitle] = useState('');\r\n\tconst [dosage, setDosage] = useState('');\r\n\t\r\n\tconst clearForm = () => {\r\n\t\tsetTitle('');\r\n\t\tsetDosage('');\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Form inline>\r\n\t\t\t<Form.Control\r\n\t\t\t\tclassName=\"mb-2 mr-sm-2\"\r\n\t\t\t\tid={'title'}\r\n\t\t\t\tplaceholder={'Название'}\r\n\t\t\t\tvalue={title}\r\n\t\t\t\tonChange={(e) => {setTitle(e.currentTarget.value)}}\r\n\t\t\t>\r\n\t\t\t</Form.Control>\r\n\t\t\t<Form.Control\r\n\t\t\t\tclassName=\"mb-2 mr-sm-2\"\r\n\t\t\t\ttype={'number'}\r\n\t\t\t\tid={'dosage'}\r\n\t\t\t\tplaceholder={'Дозировка'}\r\n\t\t\t\tvalue={dosage}\r\n\t\t\t\tonChange={(e) => {setDosage(e.currentTarget.value)}}\r\n\t\t\t>\r\n\t\t\t</Form.Control>\r\n\t\t\t<Button\r\n\t\t\t\ttype={'submit'}\r\n\t\t\t\tclassName={'mb-2'}\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tsetDrug({type: 'drug', title, dosage, time: new Date().getTime(), archive: false});\r\n\t\t\t\t\tclearForm();\r\n\t\t\t\t}}\r\n\t\t\t\tdisabled={title === '' || dosage <= 0}\r\n\t\t\t>\r\n\t\t\t\tДобавить\r\n\t\t\t</Button>\r\n\t\t</Form>\r\n\t)\r\n}\r\n\r\nexport default DrugForm;\r\n","import React from 'react';\r\nimport {Badge, Card, ListGroup} from \"react-bootstrap\";\r\n\r\nconst DrugList = ({data}) => {\r\n\tconst _renderedList = data.map(drug => {\r\n\t\treturn <ListGroup.Item key={drug._id}>{drug.title} <Badge variant={'info'}>{drug.dosage}</Badge></ListGroup.Item>\r\n\t})\r\n\treturn (\r\n\t\t<Card>\r\n\t\t\t<Card.Header><h6>Список лекарств</h6></Card.Header>\r\n\t\t\t<ListGroup>\r\n\t\t\t\t{_renderedList}\r\n\t\t\t</ListGroup>\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nexport default DrugList;\r\n","import React, {Component} from 'react';\r\nimport {Container} from \"react-bootstrap\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {connect} from \"react-redux\";\r\nimport {get, initializeDB} from \"../../_functions/db\";\r\nimport {setDrug, setDrugs} from \"../../store/settings/actions\";\r\nimport DrugForm from \"./DrugForm.component\";\r\nimport DrugsList from \"./DrugsList\";\r\nimport {sortData} from \"../../_functions/handlersData\";\r\n\r\nconst SETTINGS = 'settings';\r\nconst READWRITE = 'readwrite';\r\n\r\nclass Settings extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdb: null,\r\n\t\t\tdrug: {\r\n\t\t\t\ttype: 'drug',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tdosage: 0\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.initDB = this.initDB.bind(this);\r\n\t\tthis.getItems = this.getItems.bind(this);\r\n\t\tthis.setDrug = this.setDrug.bind(this);\r\n\t}\r\n\t\r\n\tinitDB = async () => {\r\n\t\tconst db = await initializeDB();\r\n\t\t\r\n\t\tthis.setState({db: db});\r\n\t\t\r\n\t\tif (this.props.drugs.length <= 0) {\r\n\t\t\tawait this.getItems();\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetItems = async () => {\r\n\t\tconst {db} = this.state;\r\n\t\tlet drugs = await get(db, SETTINGS, 'type', 'drug');\r\n\t\tif (drugs.length) {\r\n\t\t\tthis.props.setDrugs(drugs);\r\n\t\t}\r\n\t}\r\n\t\r\n\taddItem = async (setting) => {\r\n\t\tconst {db} = this.state;\r\n\t\tlet tx = db.transaction(SETTINGS, READWRITE);\r\n\t\tlet settingsStore = tx.objectStore(SETTINGS);\r\n\t\ttry {\r\n\t\t\tawait settingsStore.add(setting);\r\n\t\t} catch (e) {\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetDrug = async (drug) => {\r\n\t\tawait this.addItem(drug);\r\n\t\tawait this.getItems();\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.initDB();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Container>\r\n\t\t\t\t<div className=\"row d-flex justify-content-center mt-3 mb-auto\">\r\n\t\t\t\t\t<div className=\"col-md-6\">\r\n\t\t\t\t\t\t<h5>Настройки</h5>\r\n\t\t\t\t\t\t<div className={'dropdown-divider'} />\r\n\t\t\t\t\t\t<h6>Лекарства</h6>\r\n\t\t\t\t\t\t<DrugForm setDrug={this.setDrug} />\r\n\t\t\t\t\t\t<DrugsList data={sortData(this.props.drugs)} />\r\n\t\t\t\t\t\t<div className={'dropdown-divider'} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Container>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tdrugs: state.settings.drugs\r\n\t}\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n\treturn {\r\n\t\tdispatch,\r\n\t\t...bindActionCreators({setDrugs, setDrug}, dispatch)\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings);\r\n","import React from 'react';\r\nimport Home from \"./components/home/Home.component\";\r\nimport {BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\r\nimport AppNavbar from \"./components/navbar/AppNavbar.component\";\r\nimport Settings from \"./components/settings/Settings.component\";\r\n\r\nexport default function App() {\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<AppNavbar/>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route path={'/settings'}>\r\n\t\t\t\t\t<Settings />\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path={'/stats'}>\r\n\t\t\t\t\t<h1>Раздел в разработке</h1>\r\n\t\t\t\t</Route>\r\n\t\t\t\t<Route path={'/'}>\r\n\t\t\t\t\t<Home/>\r\n\t\t\t\t</Route>\r\n\t\t\t</Switch>\r\n\t\t</Router>\r\n\t)\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {store} from \"../index\";\r\nimport {showModal, hideModal} from \"../store/buttonsPanel/actions\";\r\n\r\nexport function handleShowModal(e) {\r\n\treturn store.dispatch(showModal(e.currentTarget.dataset.type));\r\n}\r\n\r\nexport function handleCloseModal() {\r\n\treturn store.dispatch(hideModal());\r\n}","import {DISABLE_BUTTON, ENABLE_BUTTON, HIDE_MODAL, SHOW_MODAL} from \"./actionTypes\";\r\nimport {handleShowModal} from \"../../_functions/handleModal\";\r\n\r\nconst initialState = {\r\n\tbuttons: [\r\n\t\t{\r\n\t\t\ttype: 'Сон',\r\n\t\t\tsubType: 'начало',\r\n\t\t\ticon: 'fa-bed',\r\n\t\t\tdisabled: false,\r\n\t\t\tvariant: 'primary'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'Еда',\r\n\t\t\ticon: 'fa-cutlery',\r\n\t\t\tdisabled: false,\r\n\t\t\tvariant: 'success',\r\n\t\t\tonClick: handleShowModal\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'Лекарства',\r\n\t\t\ticon: 'fa-medkit',\r\n\t\t\tdisabled: false,\r\n\t\t\tvariant: 'danger',\r\n\t\t\tonClick: handleShowModal\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'Приступы',\r\n\t\t\ticon: 'fa-heartbeat',\r\n\t\t\tdisabled: false,\r\n\t\t\tvariant: 'warning',\r\n\t\t\tonClick: handleShowModal\r\n\t\t}\r\n\t],\r\n\tmodalShow: false,\r\n\tmodalType: '',\r\n\tmodals: [\r\n\t\t{\r\n\t\t\ttype: 'еда',\r\n\t\t\tdescription: true,\r\n\t\t\tdrugs: false,\r\n\t\t\tcount: false,\r\n\t\t\tseries: false,\r\n\t\t\tstrength: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'Лекарства',\r\n\t\t\tdrugs: true,\r\n\t\t\tdescription: false,\r\n\t\t\tcount: false,\r\n\t\t\tseries: false,\r\n\t\t\tstrength: false,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: 'Приступы',\r\n\t\t\tcount: true,\r\n\t\t\tseries: true,\r\n\t\t\tstrength: true,\r\n\t\t\tdescription: false,\r\n\t\t\tdrugs: false\r\n\t\t}\r\n\t]\r\n};\r\n\r\nexport const buttonsPanelReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase DISABLE_BUTTON: {\r\n\t\t\tconst buttons = [...state.buttons];\r\n\t\t\tconst idx = buttons.findIndex((button) => button.type === action.payload.type);\r\n\t\t\tbuttons[idx].disabled = true;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbuttons: [...buttons]\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase ENABLE_BUTTON: {\r\n\t\t\tconst buttons = [...state.buttons];\r\n\t\t\tconst idx = buttons.findIndex((button) => button.type === action.payload.type);\r\n\t\t\tbuttons[idx].disabled = false;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbuttons: [...buttons]\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SHOW_MODAL: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmodalShow: true,\r\n\t\t\t\tmodalType: action.payload.modalType\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase HIDE_MODAL: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmodalShow: false,\r\n\t\t\t\tmodalType: ''\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n}","import {RESET_ITEM, SET_ITEM, SET_ITEMS} from './actionTypes';\r\nimport {sortData} from \"../../_functions/handlersData\";\r\n\r\nconst initialState = {\r\n\tcurrentDate: new Date().getTime(),\r\n\titems: []\r\n}\r\n\r\nexport const dataReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_ITEM: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: sortData([...state.items, action.payload.item])\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_ITEMS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: sortData(action.payload.items)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase RESET_ITEM: {\r\n\t\t\tconst {item} = action.payload;\r\n\t\t\tconst idx = state.items.findIndex(({time}) => time === item.time);\r\n\t\t\tif (idx === -1) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst newItems = [...state.items];\r\n\t\t\tnewItems.splice(idx, 1, item);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: sortData([...newItems])\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// {\r\n// \ttype: 'сон',\r\n// \t\tsubType: 'начало',\r\n// \ttime: new Date().getTime(),\r\n// \tcolor: 'badge-primary'\r\n// },\r\n// {\r\n// \ttype: 'сон',\r\n// \t\tsubType: 'конец',\r\n// \tquality: 3,\r\n// \ttime: new Date().getTime(),\r\n// \tcolor: 'badge-primary'\r\n// },\r\n// {\r\n// \ttype: 'еда',\r\n// \t\tdescription: 'Брокколи с яйцом',\r\n// \ttime: new Date().getTime(),\r\n// \tcolor: 'badge-success'\r\n// },\r\n// {\r\n// \ttype: 'Лекарства',\r\n// \t\tdrugs: [\r\n// \t{\r\n// \t\ttitle: 'Депакин',\r\n// \t\tdosage: '150',\r\n// \t},\r\n// \t{\r\n// \t\ttitle: 'Магний',\r\n// \t\tdosage: '200',\r\n// \t}\r\n// ],\r\n// \ttime: new Date().getTime(),\r\n// \tcolor: 'badge-warning'\r\n// },\r\n// {\r\n// \ttype: 'Приступы',\r\n// \t\tcount: 10,\r\n// \tseries: true,\r\n// \tstrength: 1,\r\n// \ttime: new Date().getTime(),\r\n// \tcolor: 'badge-danger'\r\n// },","import {SET_DRUG, SET_DRUGS} from \"./actionTypes\";\r\n\r\nconst initialState = {\r\n\tdrugs: []\r\n}\r\n\r\nexport const settingsReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_DRUGS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdrugs: action.payload.drugs\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_DRUG: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdrugs: [...state.drugs, action.payload.drug]\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault: {\r\n\t\t\treturn state;\r\n\t\t}\r\n\t}\r\n}","import {combineReducers} from \"redux\";\r\nimport {buttonsPanelReducer} from \"./buttonsPanel/reducers\";\r\nimport {dataReducer} from './data/reducers';\r\nimport {settingsReducer} from \"./settings/reducers\";\r\n\r\nexport default combineReducers({\r\n\tbuttons: buttonsPanelReducer,\r\n\tdata: dataReducer,\r\n\tsettings: settingsReducer,\r\n});\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport rootReducer from './store/reducers';\nimport {applyMiddleware, createStore} from \"redux\";\nimport thunk from 'redux-thunk';\nimport {Provider} from 'react-redux';\nimport {composeWithDevTools} from 'redux-devtools-extension';\n\nexport const store = createStore(rootReducer, composeWithDevTools(\n  applyMiddleware(thunk),\n));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}